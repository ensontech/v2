import inspect
import functionmatrix
import re

### Create FunctionIndex ###
def functionindex():
    functions = inspect.getmembers(functionmatrix, inspect.isfunction)
    info = {}
    for f in functions:
        source = inspect.getsource(getattr(functionmatrix, f[0]))
        info[f[0]] = source
    return info

### Get source code of function from FunctionIndex ###
def functionsource(arg1):
    s = functionindex()
    sourcecode = s[arg1]
    return sourcecode

### Generate Source ###
def generatesource(arg1):
    f = re.sub('\(.*','',arg1)
    i = functionindex()
    return i[f]

### Write Config ###
config = ""
def writeconfig(args):
    commands = args
    global config
    for c in commands:
        config+= generatesource(c)
        config+= (c + '\n')
    write = config
    config = ""
    return write

### EXAMPLE ###
### Import Compiler
import compiler
### Generate Config ###
config = compiler.writeconfig(['createfolder("test/")','deletefolder("test/")'])
### Send config to client (which will execute)###
