import inspect
import functionmatrix
import re

### Create FunctionIndex ###
def functionindex():
    functions = inspect.getmembers(functionmatrix, inspect.isfunction)
    info = {}
    for f in functions:
        source = inspect.getsource(getattr(functionmatrix, f[0]))
        info[f[0]] = source
    return info

### Get source code of function from FunctionIndex ###
def functionsource(arg1):
    s = functionindex()
    sourcecode = s[arg1]
    return sourcecode

### Derive Function from Command ###
def derivefunction(arg1):
    func = re.sub('\(.*','',arg1)
    return func

### Generate Source ###
def generatesource(arg1):
    global config
    f = derivefunction(arg1)
    config+= functionsource(f)

### Config Start ###
config = ""
commands = ['createfolder("test/")','deletefolder("test/")']
for c in commands:
    generatesource(c)
    config+= (c + '\n')

print(config)
exec(config)
